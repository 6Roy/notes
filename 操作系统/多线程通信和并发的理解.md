# 多线程与并发

## 1 补充
### this指针
this关键字指向的是当前对象的引用

this 不是指向类。而是在实例化的时候与当前类的实例也就是对象，进行绑定。

### 关于回调

对于Python与JavaScript这种，能够直接传递“函数类型”的参数的语言，回调函数可以作为另外一个函数的参数，进行传递。

在C++和java这种只能传递基本数据类型和构造数据类型的语言中，即函数不作为数据类型的语言中，可以通过传递整个对象的方法，使得被调用者，能够通过调用者对象的指针，进行回调，这也是设计模式的一种。（观察者模式？）


关于回调函数的本质理解：当其他程序执行时，能够通过回调函数，转移进程控制权限，给调用者。可以把调用者与被调用者分开。调用者能够显式调用被调用者，同时被调用这能通过回调函数隐式调用调用者。

关于回调函数的本质理解：回调函数在同一个层次内是没有用的，或者说没有必要的。如果一个人，在实现一个层次内部的函数执行权限转移过程中，可以直接进行相互调用，因为本质上，两个部分是完全可知的。但是在不同层次的调用中，例如用户层与系统层中，用户层调用系统层，可以通过显式调用，但是系统层并不会考虑用户层的具体实现，对用户层是不可知的。这个时候，系统层会通过传递来的回调函数，将进程控制权交给用户层。

那么问题来了，直接通过返回值的方式转移进程的控制权限不好吗。在回调的部分通过返回值，区分不同的情况，用户自己选择执行什么样的函数。

首先允许我，在这里将程序简单地分为用户层和系统层。用户层就是程序员编写的代码，系统层就是程序语言提供的外部库、框架、工具等。

关于回调函数的本质理解：回调函数在单线程的编程中也有一定的作用。在之前的疑问中，用户根据返回值调用不同的函数与系统调用回调函数与系统通过回调函数调用用户程序，后者，当回调程序执行完成后控制权依旧交给系统，不必考虑，系统在什么地方中断。在这里涉及一个关键的问题，到底是用户具有主动权还是系统具有主动权。在架构设计中有一个很关键的问题，系统应该提供大量的类、方法等工具，帮助用户实现一个完成的程序，还是系统应该实现主体的程序，在特定情况下调用用户的程序实现局部功能？

关于这个问题的讨论，我想应该牵扯到系统架构相关的很多知识，我觉得有空多读点专业类的书籍还是很有帮助的。理论书籍。要远比自己单纯的了解技术和知识好的多。

我想关于上边的问题，应该可以非常好的区分编程框架与库的区别。比如jQuery就是编程库，它提供了功能。springboot是编程框架，它提供了主体流程，用户只要实现少量的自定义模块，而不需要管理程序的一级一级调用过程。

简单来说，用户只要通过少量的注解，就能将自己的类注册到spring框架当中，用户完成的知识其中的一笑部分补充代码。

简单举例，假如我想要设计一个编程框架，这个框架是想要提供可以复用的功能，还是想完成主要的流程呢？

我之前觉得仿真程序的开发，不好的原因是扩展性、可读性、重用性都十分差，所以，从工程的角度来说，这些代码确实需要重构。

那么通过什么样的方式实现代码重构呢？最终的要的办法是实现模块化，将所有的功能模块化，并提供统一的标准接口，规范命名等。

另一个很重要的内容，是构建新的编程框架。使每一个开发人员都专注于搞算法和逻辑，而不是在无休止的重复尝试。写一堆无用的重复的逻辑代码。

模块化，提供编程的API，实现各种可以重复使用的功能。
编程框架，编程模型，实现主要的业务流程，作为系统层，用户通过注入的方式，将自己身构建的代码添加到系统流程中。系统通过回调的方式，实现特殊情况的处理。
